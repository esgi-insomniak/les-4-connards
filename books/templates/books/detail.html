{% extends "base.html" %}
{% block content %}


<div class="container flex flex-col items-center justify-center p-6">
    <div class="grid grid-cols-3 gap-4">
        {% include 'components/books/card.html' with livre=book %}
        <ul class="menu bg-base-800 w-56">
            <li class="menu-title">
                <span>Informations</span>
            </li>
            <li><a>Titre : {{ book.title }}</a></li>
            <li><a>Editeur : {{ book.editor }}</a></li>
            <li><a>Collection : {{ book.collection }}</a></li>
            <li class="menu-title">
                <span>Auteurs</span>
            </li>
            {% for author in book.author_as_list %}
            <li>
                <a href="/books/search/?author={{ author }}">{{ author }}</a>
            </li>
            {% endfor %}
            <li class="menu-title">
                <span>Genres</span>
            </li>
            {% for genre in book.genre_as_list %}
            <li>
                <a href="/books/search/?genre={{ genre }}">{{ genre }}</a>
            </li>
            {% endfor %}
            <li class="menu-title">
                <span>Historique d'emprunts</span>
            </li>

        </ul>

        {% if librairie.id == request.user.id or user.is_superuser%}
        <div class="card bg-gray-800 p-3 h-full">
            <h1 class="text-xl text-center my-5">Panel Librairie</h1>
            <h2 class="text-lg my-5">Emprunter un livre</h2>
            <form action="/books/loan/{{librairie.id}}/" method="post">
                <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
                <label class="label-text" for="livre">Livre</label>
                <select class="input w-full mb-2" name="livre" id="livre">
                    {% for livre in livres %}
                        {% if livre.statut == False %}
                            <option value="{{ livre.id }}">{{ livre.title }}</option>
                        {% endif %}
                    {% endfor %}
                </select>
                <label class="label-text" for="utilisateur">Utilisateur</label>
                <select class="input w-full mb-2" name="utilisateur" id="utilisateur">
                    {% for utilisateur in utilisateurs %}
                        {% if utilisateur.is_staff == False %}
                            <option value="{{ utilisateur.id }}">{{ utilisateur.username }}</option>
                        {% endif %}
                    {% endfor %}
                </select>

                <div class="form-control w-full max-w-xs">
                  <label class="label">
                    <span class="label-text">What is your name?</span>
                </label>
                <input type="text" placeholder="Jane Doe" class="input input-bordered">

                <label class="label-text" for="date_emprunt">Date d'emprunt</label>
                <input class="input w-full mb-2" type="date" name="date_emprunt" id="date_emprunt">
                <label class="label-text" for="date_retour">Date de retour</label>
                <input class="input w-full mb-2" type="date" name="date_retour" id="date_retour">
                <input class="btn btn-primary w-full" type="submit" value="Emprunter">
            </form>
        </div>
        {% endif %}

    </div>
</div>

{% endblock %}